# Account.KktLicenseSet

## Описание

Метод возвращает данные касс (ККТ) с разбиением по лицензиям ОФД.

Метод возвращает данные всех касс, которые можно видеть в детализации карточки аккаунта (по клику на счётчики касс), в аналогичном представлении. Если касса была активирована с использованием платной лицензии, а затем продлена (например, с помощью кода активации), метод вернёт кассу с данным РНМ дважды с привязкой к соответствующей лицензии (как и в детализации).

## Параметры

| Название   | Тип            | Описание                  |
|------------|----------------|---------------------------|
| AccountID  | Число целое    | Идентификатор аккаунта    |

## Результат

Набор записей, каждая из которых соответствует той или иной лицензии с услугой ОФД. Записи имеют следующий формат:

| Название          | Тип            | Описание                                                                 |
|-------------------|----------------|--------------------------------------------------------------------------|
| LicenseID         | Строка         | Идентификатор лицензии                                                   |
| EndUseDate        | Дата           | Дата, вплоть до которой лицензия может быть использована                 |
| ContractorID      | Число целое    | Идентификатор организации–владельца лицензии                             |
| ContractorINN     | Строка         | ИНН организации–владельца лицензии                                       |
| AllowedCellCount  | Число целое    | Общее количество ячеек для подключения касс, которые содержит в себе лицензия |
| UsedCellCount     | Число целое    | Количество занятых ячеек в лицензии                                      |
| LicenseCost       | Денежный       | Стоимость лицензии с учётом скидок                                       |
| KktList           | Набор записей  | Список касс, которые занимают (или занимали ранее) ячейки в данной лицензии |

Если касса деактивирована (см. далее), она более не занимает ячейку в лицензии, эта ячейка может быть использована для подключения другой кассы.

Результирующий набор содержит также записи со специальными идентификаторами LicenseID (если аналогичные разделы есть в детализации):

- trial - в этот раздел будут включены кассы, для которых действует триальный период;
- no-license - кассы без привязки к лицензии будут в этом разделе. Для записей с этими идентификаторами значащими будут только поля UsedCellCount и KktList, значение остальных полей не определено (могут содержать произвольные данные).

Список касс KktList каждой записи результата имеет следующий формат:

| Название          | Тип            | Описание                                                                 |
|-------------------|----------------|--------------------------------------------------------------------------|
| RegKktID          | Строка         | РНМ кассы                                                                |
| ContractorID      | Число целое    | Идентификатор организации–владельца кассы                                |
| OFD               | Строка         | Организация, предоставляющая услуги ОФД для данной кассы: Тензор или Первый ОФД |
| DeactivationDate  | Дата           | Дата деактивации кассы                                                   |
| Prolonged         | Логический     | Признак продления кассы                                                  |
| EndLicenseDate    | Дата           | Дата действия лицензии для кассы                                         |
| LastActivityDate  | Дата           | Дата последней активности кассы (отправки чеков)                         |
| OfficeCode        | Строка         | Код офиса, за которым закреплена касса                                   |
| OfficeName        | Строка         | Название офиса, за которым закреплена касса                              |
| UserName          | Строка         | Имя сотрудника, за которым закреплена касса                              |

Касса помечается продлённой в момент появления нового факта регистрации кассы с тем же РНМ с большей датой действия лицензии. Это происходит, например, в случае продления кассы с помощью кода из реестра касс, а также в случае автоматической привязки триальной кассы (которая и будет продлена) к платной лицензии в момент отправки чека.

## Пример вызова

```json
{
    "jsonrpc": "2.0",
    "method": "Account.KktLicenseSet",
    "params": {
        "AccountID": 4363913
    },
    "protocol": 2,
    "id": 0
}