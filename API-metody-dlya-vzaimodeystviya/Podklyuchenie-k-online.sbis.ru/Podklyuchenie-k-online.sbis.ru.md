Подключение к online.sbis.ru
Алгоритм подключения клиента к online.sbis.ru

    Завести организацию в базе Биллинга, если её ещё нет, и определить её идентификатор:
    [Contractor.FindOrCreate](../Rabota-s-klientami/Contractor-FindOrCreate.md) (Реквизиты_контрагента)

    Определить список аккаунтов, в которые входит данная организация:
    [Contractor.InfoByID](../Rabota-s-klientami/Contractor-InfoByID.md) (ID_контрагента)

    Если в этом списке нет подходящего аккаунта, создать новый:
    [Contractor.CreateWithAccount](../Rabota-s-klientami/Contractor-CreateWithAccount.md) (Реквизиты_Контрагента, True )

    Если необходимо, добавить в аккаунт другие организации:
    [Account.AddContractor](../Rabota-s-klientami/Account-AddContractor.md) (ID_аккаунта, Реквизиты_контрагента)
    или, если контрагент с указанными реквизитами уже есть в Биллинге и его идентификатор известен:
    [Account.AddContractorByID](../Rabota-s-klientami/Account-AddContractorByID.md) (ID_аккаунта, ID_контрагента).

Далее возможны следующие варианты действий.
Вариант 1

    Подготовить кабинет клиента на online.sbis.ru для входа по временному логину:
    [Account.PrepareCabinet](Account-PrepareCabinet.md) (ID_аккаунта);

    Дождаться входа клиента на online.sbis.ru в личный кабинет по временному логину (совпадающему с идентификатором аккаунта).

Вариант 2

    Отправить приглашение к регистрации с помощью метода:
    [Account.SendInvite](Account-SendInvite.md) (ID_аккаунта) (при необходимости в письме приглашения можно передать вложения, см. описание метода [Letter.AttachInvoice](Letter-AttachInvoice.md));

    Дождаться перехода клиента по ссылке в приглашении на сервис регистрации online.sbis.ru и завершения регистрации.

Вариант 3

    Отправить приглашение к регистрации с помощью метода [Биллинг.НовоеПриглашение](Billing-NovoePriglashenie.md). На вход данному методу должны быть переданы реквизиты одной из организаций, входящих в состав аккаунта.

    Внимание

    Обращаем внимание на то, что метод вернёт ошибку, если организация, реквизиты которой были переданы, уже входит в состав активированного и/или платного аккаунта.

    Заметим также, что для завершения регистрации по приглашению может быть автоматически выбран любой триальный неактивированный аккаунт, в состав которого входит данная организация, если на момент создания приглашения с помощью данного метода таких аккаунтов было 2 или более.

    Для автоматического закрепления аккаунта и организации за вашим подразделением необходимо передать его код (см. описание метода).

    Дождаться перехода клиента по ссылке в приглашении на сервис регистрации online.sbis.ru и завершения регистрации.

Вариант 4

Выполнить самостоятельную регистрацию по сертификату с помощью метода [Биллинг.СоздатьКлиента](Billing-SozdatKlienta.md) без предварительного создания приглашения.

На вход данному методу должны быть переданы реквизиты одной из организаций, входящих в состав аккаунта. Заметим также, что для регистрации может быть автоматически выбран любой неактивированный аккаунт, в состав которого входит данная организация (если такого аккаунта нет, он будет создан в ходе выполнения метода).

Для автоматического закрепления аккаунта и организации за вашим подразделением необходимо передать его код (см. описание метода).

Регистрация по третьему и четвёртому варианту может быть выполнена и без предварительного создания организации и аккаунта для неё, в этом случае алгоритм сводится к вызову одного метода ([Биллинг.НовоеПриглашение](Billing-NovoePriglashenie.md) или [Биллинг.СоздатьКлиента](Billing-SozdatKlienta.md) - в зависимости от выбранного варианта).