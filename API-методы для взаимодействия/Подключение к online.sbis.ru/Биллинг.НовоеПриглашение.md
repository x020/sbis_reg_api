# Биллинг.НовоеПриглашение

## Внимание

Метод должен быть вызван по адресу https://online.sbis.ru/reg/service/ (адрес для тестирования - https://fix-online.sbis.ru/reg/service/), передача идентификатора сессии не требуется.

## Описание

Метод создаёт приглашение к регистрации и ставит его в очередь на отправку. Очередь обрабатывается (разбирается) каждую минуту.

Метод может вернуть ошибку в качестве результата, если:

- переданные ИНН и КПП являются некорректными;
- приглашаемая организация связана с авторизованным или платным аккаунтом (то есть аккаунтом, обладающим платной лицензией).

В том случае, если в состав записи «Реквизиты» входит заполненное поле «КодПартнера», то аккаунт, выбранный для регистрации, а также подключаемый контрагент будут перезакреплены за подразделением с указанным кодом после завершения регистрации по данному приглашению.

## Параметры

Запись «Реквизиты», содержащая следующие поля:

| Название | Тип | Описание |
|----------|-----|----------|
| **ИННПолуч** | Строка | ИНН контрагента – получателя приглашения |
| **КПППолуч** | Строка | КПП контрагента, для индивидуального предпринимателя может быть пустым или отсутствовать |
| **MailПолуч** | Строка | Адрес эл. почты, на который следует отправить приглашение |
| **ИдШаблонаПисьма** | Строка | Тип приглашения, следует передавать строковую константу «ПриглашениеСГлавногоОкнаЭДО» |
| **НазвПолуч** | Строка | Название контрагента – получателя приглашения |
| GUID | Строка (UUID) | Идентификатор приглашения<br>Может быть использован в дальнейшем для вызова метода «Биллинг.СоздатьКлиента» |
| КодПартнера | Строка | Код офиса партнера, состоящий из 4-х или 5-ти цифр, необходим для последующего закрепления клиента за переданным партнёром |
| ИдентификаторАкции | Строка | Идентификатор акции, в рамках которой выполняется регистрация |

## Примечание

Поля, названия которых выделены полужирным шрифтом, являются обязательными к заполнению.

## Результат

false, если создание приглашения успешно завершено, исключение с описанием ошибки в противном случае.

## Пример запроса

```json
{
    "jsonrpc": "2.0",
    "method": "Биллинг.НовоеПриглашение",
    "params": {
        "Реквизиты": {
            "s": {
                "ИННПолуч": "Строка",
                "КПППолуч": "Строка",
                "НазвПолуч": "Строка",
                "MailПолуч": "Строка",
                "ИдШаблонаПисьма": "Строка",
                "GUID": "Строка",
                "КодПартнера": "Строка"
            },
            "d": {
                "ИННПолуч": "1215107651",
                "КПППолуч": "121501001",
                "НазвПолуч": "Детский сад Чайка",
                "MailПолуч": "iam@mail.ru",
                "ИдШаблонаПисьма": "ПриглашениеСГлавногоОкнаЭДО",
                "GUID": "4f40fed3-2bc4-4bc2-bedb-08623e4ded6f",
                "КодПартнера": "7705"
            }
        }
    },
    "protocol": 2,
    "id": 0
}